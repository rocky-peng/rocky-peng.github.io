import{_ as i,$ as d,a0 as r,a1 as e,a3 as a,a4 as l,a5 as o,a2 as n,w as c}from"./framework-b3a0f150.js";const t={},u=o(`<p>BBR 是google发布一个网络拥塞算法，相比其他算法而言其性能更高，能更好的利用网络带宽。</p><h2 id="前提条件" tabindex="-1"><a class="header-anchor" href="#前提条件" aria-hidden="true">#</a> 前提条件</h2><ul><li>CentOS 7.x</li><li>sudo 权限</li></ul><h2 id="步骤一-升级内核" tabindex="-1"><a class="header-anchor" href="#步骤一-升级内核" aria-hidden="true">#</a> 步骤一：升级内核</h2><ol><li><p>查看当前内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>uname -r
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>可以看到内核版本是3.10.0</p></li><li><p>安装 ELRepo</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo rpm --import https<span class="token operator">:</span><span class="token comment">//www.elrepo.org/RPM-GPG-KEY-elrepo.org</span>

sudo rpm -Uvh http<span class="token operator">:</span><span class="token comment">//www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>安装高版本内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo yum --enablerepo=elrepo-kernel install kernel-ml -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装完成后查看安装结果</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>rpm -qa | grep kernel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>如果安装成功，上面命令会输出 <code>kernel-ml-x.x.x-1.el7.elrepo.x86_64</code> ，类似下面样子</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>kernel-ml<span class="token number">-4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64

kernel<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514</span>.el7.x86_64

kernel-tools-libs<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64

kernel-tools<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64

kernel<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启用新的内核，启用前查看grub2启动项</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo egrep ^menuentry /etc/grub2.cfg | cut -f <span class="token number">2</span> -d \\&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>CentOS Linux <span class="token number">7</span> Rescue a0cbf86a6ef1416a8812657bb4f2b860 (<span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64)

CentOS Linux (<span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514</span>.el7.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">0</span>-rescue-bf94f46c6bd04792a6a42c91bae645f7) <span class="token number">7</span> (Core)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>从上往下，从0开始往下数，我们要启用的内核位置是1，于是执行</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo grub2-set-default <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>重启系统</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>reboot
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>重启后查看系统内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>uname -r
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="步骤二-启用bbr" tabindex="-1"><a class="header-anchor" href="#步骤二-启用bbr" aria-hidden="true">#</a> 步骤二：启用BBR</h2><ol><li><p>修改<code>sysctl</code> 配置已启用BBR</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>echo &#39;net.core.default_qdisc=fq&#39; | sudo tee -a /etc/sysctl.conf

echo &#39;net.ipv4.tcp_congestion_control=bbr&#39; | sudo tee -a /etc/sysctl.conf

sudo sysctl -p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>验证是否已经启用了BBR</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo sysctl net.ipv4.tcp_available_congestion_control
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会输出类似下面的内容</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>net.ipv4.tcp_available_congestion_control = bbr cubic reno
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>进一步验证</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo sysctl -n net.ipv4.tcp_congestion_control
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>应该输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>bbr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>最后检查内核模块是否已经加载</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>lsmod | grep bbr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会输出类似下面的内容</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>tcp_bbr                <span class="token number">16384</span>  <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="步骤三" tabindex="-1"><a class="header-anchor" href="#步骤三" aria-hidden="true">#</a> 步骤三</h2><p>没有了，享用BBR吧</p><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,11),p=e("p",null,[e("br"),e("br"),e("br"),e("br"),e("br"),e("br")],-1),m=e("hr",null,null,-1),v=e("hr",null,null,-1),b=e("ul",null,[e("li",null,[e("strong",null,"随机毒鸡汤"),n("：千万别在一棵树上吊死，可以到周围的树上多试几次。 "),e("br"),e("br"),e("img",{src:"https://images.pexels.com/photos/15626023/pexels-photo-15626023.jpeg?auto=compress&cs=tinysrgb&h=650&w=940",alt:"View from ski lift at Ordino Arcalis ski resort in Andorra, featuring skis and snow-covered slopes.",loading:"lazy"})])],-1);function g(E,h){const s=c("RouterLink");return d(),r("div",null,[u,e("ul",null,[e("li",null,[a(s,{to:"/software/unclassified/RSA%20%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88.html"},{default:l(()=>[n("RSA 加密解密多语言实现方案")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/%E5%90%84%E7%A7%8D%E7%BD%91%E5%85%B3%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html"},{default:l(()=>[n("各种网关性能测试")]),_:1})]),e("li",null,[a(s,{to:"/software/spring/Spring%20Cloud%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88%E3%80%90Finchley%20%E7%89%88%E3%80%91.html"},{default:l(()=>[n("Spring Cloud（一）：服务治理技术概览【Finchley 版】")]),_:1})]),e("li",null,[a(s,{to:"/software/java-basic/Thread%20&%20ExecutorService%20&%20ThreadPoolExecutor%20%E6%80%BB%E8%A7%88.html"},{default:l(()=>[n("Thread & ExecutorService & ThreadPoolExecutor 总览")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/%E7%BA%BF%E4%B8%8AFullGC%E9%A2%91%E7%B9%81%E7%9A%84%E6%8E%92%E6%9F%A5.html"},{default:l(()=>[n("线上FullGC频繁的排查")]),_:1})]),e("li",null,[a(s,{to:"/other/%E6%8E%A8%E8%8D%90%E5%87%A0%E4%B8%AA%E9%80%82%E7%94%A8%E5%B0%8F%E5%B7%A5%E5%85%B7.html"},{default:l(()=>[n("推荐几个适用小工具")]),_:1})]),e("li",null,[a(s,{to:"/other/Spring%20Boot%E5%8D%87%E7%BA%A7%E5%88%B02%206%20x%E8%B8%A9%E7%9A%84%E5%9D%91.html"},{default:l(()=>[n("Spring Boot升级到2 6 x踩的坑")]),_:1})]),e("li",null,[a(s,{to:"/software/middleware/mysql/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1Seata.html"},{default:l(()=>[n("分布式事务Seata")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/Markdown%E8%BD%AF%E4%BB%B6%E6%AF%94%E5%AF%B9.html"},{default:l(()=>[n("Markdown软件比对")]),_:1})]),e("li",null,[a(s,{to:"/other/Git%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1.html"},{default:l(()=>[n("Git历史记录修改用户名和邮箱")]),_:1})]),e("li",null,[a(s,{to:"/software/java-basic/Java%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80.html"},{default:l(()=>[n("Java面试基础")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/%E5%88%86%E5%B8%83%E5%BC%8F%E9%97%AE%E9%A2%98.html"},{default:l(()=>[n("分布式问题")]),_:1})])]),p,m,v,b])}const B=i(t,[["render",g],["__file","如何安装Google BBR.html.vue"]]);export{B as default};
