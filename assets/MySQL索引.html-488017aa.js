import{_ as s,$ as p,a0 as d,a1 as l,a2 as e,a3 as i,a4 as n,a5 as o,w as r}from"./framework-7a325de9.js";const c={},h=o('<h2 id="innodb索引" tabindex="-1"><a class="header-anchor" href="#innodb索引" aria-hidden="true">#</a> InnoDB索引</h2><p>InnoDB支持的索引</p><ul><li><p>分类方式1：</p><ol><li><p>B+树索引</p><ul><li>B 不是指binary，而是balance。</li><li>由平衡二叉树演变而来，是目前关系型数据库中查找最为常用和有效的索引</li><li>InnoDB中，通过某个键值找到value不是具体的数据行，而是数据行所在的页，然后读取页到内存，再在内存中进行查找，最终找到要查找的数据。</li></ul></li><li><p>全文索引</p></li><li><p>哈希索引 InnoDB支持的哈希索引是自适应的，InnoDB存储引擎会根据表的使用情况自动为表生成哈希索引，不能人为干预是否在一张表中生成哈希索引。</p></li></ol></li><li><p>分类方式2：</p><ol><li><p>聚集索引</p></li><li><p>辅助索引</p></li></ol></li><li><p>分类方式3：</p><ol><li><p>主键索引</p></li><li><p>唯一索引</p></li><li><p>覆盖索引</p></li><li><p>联合索引 == 复合索引</p></li></ol></li></ul><h3 id="b-树索引" tabindex="-1"><a class="header-anchor" href="#b-树索引" aria-hidden="true">#</a> B+树索引</h3><p>前面提到过，页是MySQL进行IO操作的最小单位(表段区页，每页16kb，每次申请4-5个区，每个区1m)</p><p>页的存储结构如下： <img src="https://cdn.justdopay.com/xiaoshujiang/1629079649483.png" alt="页结构示意图" loading="lazy"></p><figure><img src="https://cdn.justdopay.com/xiaoshujiang/1629079639650.png" alt="enter description here" tabindex="0" loading="lazy"><figcaption>enter description here</figcaption></figure><figure><img src="https://cdn.justdopay.com/xiaoshujiang/1629079658873.png" alt="enter description here" tabindex="0" loading="lazy"><figcaption>enter description here</figcaption></figure><ul><li><p><strong>各个数据页</strong>组成一个<strong>双向链表</strong></p></li><li><p>每个<strong>数据页中的记录</strong>又可以组成一个<strong>单向链表</strong></p></li><li><p>每个数据页都会为存储在它里边儿的记录生成一个<strong>页目录</strong>，在通过主键查找某条记录的时候可以在页目录中使用二分法快速定位到对应的槽，然后再遍历该槽对应分组中的记录即可快速找到指定的记录</p></li><li><p>以<strong>非索引列</strong>作为搜索条件：依次遍历单链表中的每条记录</p></li></ul>',9),u={id:"b树和b-树的区别",tabindex:"-1"},f=l("a",{class:"header-anchor",href:"#b树和b-树的区别","aria-hidden":"true"},"#",-1),b={href:"https://www.cnblogs.com/xueqiuqiu/articles/8779029.html",target:"_blank",rel:"noopener noreferrer"},g=o('<li><p>B数</p><ul><li><p>关键字集合分布在整颗树中；</p></li><li><p>任何一个关键字出现且只出现在一个结点中；</p></li><li><p>搜索有可能在非叶子结点结束；</p></li><li><p>不支持范围查找</p></li></ul><figure><img src="https://cdn.justdopay.com/xiaoshujiang/1629079002404.png" alt="enter description here" tabindex="0" loading="lazy"><figcaption>enter description here</figcaption></figure></li><li><p>b+树相比于b树的查询优势：</p><ul><li><p>b+树的中间节点不保存数据，所以磁盘页能容纳更多节点元素，更“矮胖”；</p></li><li><p>b+树查询必须查找到叶子节点，b树只要匹配到即可不用管元素位置，因此b+树查找更稳定（并不慢）；</p></li><li><p>对于范围查找来说，b+树只需遍历叶子节点链表即可，b树却需要重复地中序遍历，如下两图：</p></li></ul><figure><img src="https://cdn.justdopay.com/xiaoshujiang/1629079028387.png" alt="enter description here" tabindex="0" loading="lazy"><figcaption>enter description here</figcaption></figure></li>',2),B={href:"https://www.cnblogs.com/xueqiuqiu/articles/8779029.html",target:"_blank",rel:"noopener noreferrer"},E=o('<ul><li><p>B数</p><ul><li><p>关键字集合分布在整颗树中；</p></li><li><p>任何一个关键字出现且只出现在一个结点中；</p></li><li><p>搜索有可能在非叶子结点结束；</p></li></ul><figure><img src="https://cdn.justdopay.com/xiaoshujiang/1629079002404.png" alt="enter description here" tabindex="0" loading="lazy"><figcaption>enter description here</figcaption></figure></li><li><p>b+树相比于b树的查询优势：</p><ul><li><p>b+树的中间节点不保存数据，所以磁盘页能容纳更多节点元素，更“矮胖”；</p></li><li><p>b+树查询必须查找到叶子节点，b树只要匹配到即可不用管元素位置，因此b+树查找更稳定（并不慢）；</p></li><li><p>对于范围查找来说，b+树只需遍历叶子节点链表即可，b树却需要重复地中序遍历，如下两图： <img src="https://cdn.justdopay.com/xiaoshujiang/1629079028387.png" alt="enter description here" loading="lazy"></p></li></ul></li></ul>',1),_=l("h4",{id:"索引如何提高检索速度",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#索引如何提高检索速度","aria-hidden":"true"},"#"),e(" 索引如何提高检索速度")],-1),m=l("p",null,"有了上面的基础，我们来看看要找到id为8的记录简要步骤：",-1),A=l("figure",null,[l("img",{src:"https://cdn.justdopay.com/xiaoshujiang/1629079665718.png",alt:"enter description here",tabindex:"0",loading:"lazy"}),l("figcaption",null,"enter description here")],-1),D={href:"https://mp.weixin.qq.com/s?__biz=MzIxNTQ3NDMzMw==&mid=2247483701&idx=1&sn=bd229dd584f51ef4fe545d44ad8cdbf9&chksm=979688c7a0e101d1b5c752094013b78f5bd50ab905257ba82149d85d35ea07aba1a15b0e52b4&mpshare=1&scene=1&srcid=0409Tn66UYWSWvqEVlOpwGtR&key=6cd553e86912686a47d76f2d900b1b5b388c90b29708f016db3a6e1bcebe032220ba63626095c4298f32cda7d0d7bd11bded2365f05c32e522584dd149b98db0bb8549ef144cdca694665d31d35cfeef&ascene=0&uin=MzAzMjU4NDM3Nw%3D%3D&devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.12.4+build(16E195)&version=12020810&nettype=WIFI&lang=zh_CN&fontScale=100&pass_ticket=YHEmqDDX8hHkj5FiSVpQvjYqIMBDHHDS2po4mfJe%2BqIXlqwJI%2Bg7aJUZq0%2BDwGJ0",target:"_blank",rel:"noopener noreferrer"},x=l("h4",{id:"索引如何降低增删改的速度",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#索引如何降低增删改的速度","aria-hidden":"true"},"#"),e(" 索引如何降低增删改的速度")],-1),y=l("p",null,[e("索引采用的结构是B+树，而我们知道B+树是"),l("strong",null,"平衡树"),e("的一种，对数据库执行增删改操作的时候，是会破坏平衡树的特点的，如果不采取额外的操作，B+树就可能退化成"),l("strong",null,"链表"),e("。"),l("strong",null,"因此在执行增删改操作的时候，必须采取额外的操作来维护B+树的特点，而这些额外的开销就降低了增删改的速度")],-1),w=l("li",null,[l("p",null,"平衡树 它是一棵空树或它的左右两个子树的高度差的绝对值不超过1，并且左右两个子树都是一棵平衡二叉树。")],-1),j={href:"https://www.cnblogs.com/wade-luffy/p/6292784.html",target:"_blank",rel:"noopener noreferrer"},k=o('<h3 id="hash索引" tabindex="-1"><a class="header-anchor" href="#hash索引" aria-hidden="true">#</a> Hash索引</h3><p>主流的还是使用B+树索引比较多，对于哈希索引，InnoDB是自适应哈希索引的（hash索引的创建由InnoDB存储引擎引擎自动优化创建，人工干预不了）！</p><h3 id="聚集和非聚集索引" tabindex="-1"><a class="header-anchor" href="#聚集和非聚集索引" aria-hidden="true">#</a> 聚集和非聚集索引</h3><p>聚集索引：以主键创建的索引 非聚集索引：以非主键创建的索引</p><p>一张Innodb引擎的表只能创建一个聚集索引（如果创建表的时候没有指定主键列，InnoDB会自动为每行数据生成一个6字节的rowid，并以此作为主键）</p><p><strong>区别：</strong></p><ol><li>聚集索引在叶子节点存储的是表中的数据</li><li>非聚集索引在叶子节点存储的是主键和索引列，所以使用非聚集索引一般还需要做<strong>回表</strong>操作</li><li>聚集索引一张表只能创建一个，而非聚集所以一张表可以创建多个</li></ol><p>回表：使用非聚集索引查询出数据时，拿到叶子上的主键再去查到想要查找的数据，拿到主键再查找这个过程叫做回表。</p><p>非聚集索引 == 二级索引 == 辅助索引</p><h3 id="面试题" tabindex="-1"><a class="header-anchor" href="#面试题" aria-hidden="true">#</a> 面试题</h3><ol><li>使用索引为什么可以加快数据库的检索速度啊？</li><li>为什么说索引会降低插入、删除、修改等维护任务的速度。</li><li>索引的最左匹配原则指的是什么？</li><li>Hash索引和B+树索引有什么区别？主流的使用哪一个比较多？InnoDB存储都支持吗？ <ul><li><p>哈希索引没办法利用索引完成排序</p></li><li><p>不支持最左匹配原则</p></li><li><p>在有大量重复键值情况下，哈希索引的效率也是极低的----&gt;哈希碰撞问题。</p></li><li><p>不支持范围查询</p></li></ul></li><li>聚集索引和非聚集索引有什么区别？ <ol><li><p>聚集索引在叶子节点存储的是表中的数据</p></li><li><p>非聚集索引在叶子节点存储的是主键和索引列，所以使用非聚集索引一般还需要做<strong>回表</strong>操作</p></li><li><p>聚集索引一张表只能创建一个，而非聚集所以一张表可以创建多个</p></li></ol></li></ol>',11),F={href:"https://juejin.im/post/5b55b842f265da0f9e589e79",target:"_blank",rel:"noopener noreferrer"},M=l("br",null,null,-1),I=l("h2",{id:"系统推荐",tabindex:"-1"},[l("a",{class:"header-anchor",href:"#系统推荐","aria-hidden":"true"},"#"),e(" 系统推荐")],-1),S=l("p",null,[l("br"),l("br"),l("br"),l("br"),l("br"),l("br")],-1),z=l("hr",null,null,-1),q=l("hr",null,null,-1),v=l("ul",null,[l("li",null,[l("strong",null,"随机毒鸡汤"),e("：我爸开法拉利，我妈开玛莎拉蒂，我开玩笑。 "),l("br"),l("br"),l("img",{src:"https://tuapi.eees.cc/api.php?category=biying&type=302&uuid=8f5dc5cf-ce0e-4132-b453-7616050fcce5",alt:"",loading:"lazy"})])],-1);function C(V,N){const a=r("ExternalLinkIcon"),t=r("RouterLink");return p(),d("div",null,[h,l("h3",u,[f,e(),l("a",b,[e("B树和B+树的区别"),i(a)])]),l("ul",null,[g,l("li",null,[l("p",null,[l("a",B,[e("B数和B+数的区别"),i(a)])]),E])]),_,m,A,l("p",null,[e("很明显，如果不使用索引就得遍历所有的数据知道找到目标数据。 关于MySQL中B+树索引更详细的资料参见："),l("a",D,[e("MySql中的B+树索引"),i(a)])]),x,y,l("ul",null,[w,l("li",null,[l("p",null,[e("B+树的具体算法参见："),l("a",j,[e("https://www.cnblogs.com/wade-luffy/p/6292784.html"),i(a)])])])]),k,l("p",null,[e("以上内容部分摘录自："),l("a",F,[e("https://juejin.im/post/5b55b842f265da0f9e589e79"),i(a)])]),M,I,l("ul",null,[l("li",null,[i(t,{to:"/software/java-basic/synchronized%E5%8E%9F%E7%90%86%E6%B7%B1%E5%BA%A6%E5%89%96%E6%9E%90.html"},{default:n(()=>[e("synchronized原理深度剖析")]),_:1})]),l("li",null,[i(t,{to:"/software/docker/Docker%E8%BF%9B%E8%A1%8C%E8%B5%84%E6%BA%90%E9%9A%94%E7%A6%BB.html"},{default:n(()=>[e("Docker进行资源隔离")]),_:1})]),l("li",null,[i(t,{to:"/other/%E5%BE%AE%E5%8D%9A%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0.html"},{default:n(()=>[e("微博关注关系如何实现")]),_:1})]),l("li",null,[i(t,{to:"/other/%E6%98%AF%E6%97%B6%E5%80%99%E4%BD%BF%E7%94%A8MapStruct%E6%9B%BF%E4%BB%A3BeanUtils%E4%BA%86.html"},{default:n(()=>[e("是时候使用MapStruct替代BeanUtils了")]),_:1})]),l("li",null,[i(t,{to:"/other/Spring%20RetryTemplate.html"},{default:n(()=>[e("Spring RetryTemplate")]),_:1})]),l("li",null,[i(t,{to:"/software/middleware/mq/kafka.html"},{default:n(()=>[e("kafka")]),_:1})]),l("li",null,[i(t,{to:"/software/unclassified/Flutter%E5%BC%80%E5%8F%91%E9%9C%80%E8%A6%81%E6%B6%89%E5%8F%8A%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.html"},{default:n(()=>[e("Flutter开发需要涉及的知识点大纲")]),_:1})]),l("li",null,[i(t,{to:"/software/java-basic/AQS%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB.html"},{default:n(()=>[e("AQS源码解读")]),_:1})]),l("li",null,[i(t,{to:"/software/jvm/JVM%E6%9D%82%E9%A1%B9.html"},{default:n(()=>[e("JVM杂项")]),_:1})]),l("li",null,[i(t,{to:"/software/java-basic/%E4%B8%8D%E9%87%8D%E5%90%AF%20JVM%EF%BC%8C%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2%E6%8E%89%E5%B7%B2%E7%BB%8F%E5%8A%A0%E8%BD%BD%E7%9A%84%E7%B1%BB%EF%BC%9F.html"},{default:n(()=>[e("不重启 JVM，如何替换掉已经加载的类？")]),_:1})]),l("li",null,[i(t,{to:"/other/Docker%E9%9A%90%E5%B0%84%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%A4%96%E7%BD%91%E4%B8%8D%E8%83%BD%E8%AE%BF%E9%97%AE.html"},{default:n(()=>[e("Docker隐射的端口外网不能访问")]),_:1})]),l("li",null,[i(t,{to:"/software/unclassified/%E6%9D%82%E8%AE%B0.html"},{default:n(()=>[e("杂记")]),_:1})])]),S,z,q,v])}const L=s(c,[["render",C],["__file","MySQL索引.html.vue"]]);export{L as default};
