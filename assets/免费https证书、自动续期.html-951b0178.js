import{_ as c,$ as i,a0 as p,a1 as n,a2 as s,a3 as e,a4 as l,a5 as o,w as r}from"./framework-8c4427da.js";const d={},u=o('<h2 id="ca对比" tabindex="-1"><a class="header-anchor" href="#ca对比" aria-hidden="true">#</a> CA对比</h2><p>以下是主流免费 SSL 证书颁发机构（CA）的证书有效期及关键特性对比：</p><p><strong>1. Let&#39;s Encrypt</strong> • 证书有效期：90 天</p><ul><li>自动续期：支持（通过 ACME 协议，如 <code>acme.sh</code>）</li><li>通配符证书：支持（需 DNS 验证）</li><li>特点：</li></ul><p>完全免费，开源社区维护，支持多域名（SAN），全球信任度高。</p>',5),h={href:"https://letsencrypt.org/",target:"_blank",rel:"noopener noreferrer"},m=n("p",null,[n("strong",null,"2. ZeroSSL"),s(" • 证书有效期：90 天（免费版）")],-1),_=n("ul",null,[n("li",null,[s("自动续期：支持（需使用 ACME 工具，如 "),n("code",null,"acme.sh"),s("）")]),n("li",null,"通配符证书：支持（付费版提供，免费版仅单域名）"),n("li",null,"特点：")],-1),b=n("p",null,"免费版支持单域名，需每 90 天手动续期（或通过 ACME 自动化）。",-1),k={href:"https://zerossl.com/",target:"_blank",rel:"noopener noreferrer"},g=n("p",null,[n("strong",null,"3. BuyPass"),s(" • 证书有效期：180 天")],-1),v=n("ul",null,[n("li",null,"自动续期：支持（通过 ACME 协议）"),n("li",null,"通配符证书：不支持"),n("li",null,"特点：")],-1),f=n("p",null,"有效期较长，但仅支持非通配符域名，需通过 ACME 客户端管理。",-1),E={href:"https://www.buypass.com/ssl",target:"_blank",rel:"noopener noreferrer"},A={href:"http://ssl.com/",target:"_blank",rel:"noopener noreferrer"},x=n("ul",null,[n("li",null,"自动续期：部分支持（需手动申请或付费）"),n("li",null,"通配符证书：不支持（免费版仅单域名）"),n("li",null,"特点：")],-1),C=n("p",null,"免费证书有效期短，适合短期测试，商业用途需付费升级。",-1),S={href:"https://www.ssl.com/",target:"_blank",rel:"noopener noreferrer"},y=n("p",null,[n("strong",null,"5. Google Public CA"),s(" • 证书有效期：90 天")],-1),B=n("ul",null,[n("li",null,"自动续期：支持（通过 Google Cloud 服务集成）"),n("li",null,"通配符证书：支持（需 DNS 验证）"),n("li",null,"特点：")],-1),L=n("p",null,"免费，仅限 Google Cloud 用户使用，与 GCP 服务深度集成。",-1),D={href:"https://cloud.google.com/certificate-manager",target:"_blank",rel:"noopener noreferrer"},N=n("p",null,[n("strong",null,"对比总结")],-1),F=n("thead",null,[n("tr",null,[n("th",null,"CA"),n("th",null,"免费有效期"),n("th",null,"自动续期"),n("th",null,"通配符支持"),n("th",null,"适用场景")])],-1),w=n("tr",null,[n("td",null,"Let's Encrypt"),n("td",null,"90 天"),n("td",null,"✔️"),n("td",null,"✔️"),n("td",null,"通用，高信任度，推荐长期使用")],-1),P=n("tr",null,[n("td",null,"ZeroSSL"),n("td",null,"90 天"),n("td",null,"✔️"),n("td",null,"❌（免费版）"),n("td",null,"单域名短期需求")],-1),I=n("tr",null,[n("td",null,"BuyPass"),n("td",null,"180 天"),n("td",null,"✔️"),n("td",null,"❌"),n("td",null,"非通配符域名，需较少维护")],-1),j={href:"http://ssl.com/",target:"_blank",rel:"noopener noreferrer"},M=n("td",null,"30 天",-1),G=n("td",null,"❌",-1),q=n("td",null,"❌",-1),T=n("td",null,"临时测试用途",-1),O=n("tr",null,[n("td",null,"Google CA"),n("td",null,"90 天"),n("td",null,"✔️"),n("td",null,"✔️"),n("td",null,"Google Cloud 用户专用")],-1),R=o('<p><strong>注意事项</strong></p><ol><li>信任兼容性：所有 CA 的根证书需被客户端（如浏览器、移动设备）信任，建议优先选择 Let&#39;s Encrypt 或 Google CA。</li><li>速率限制：Let&#39;s Encrypt 和 ZeroSSL 对域名签发频率有限制（如每周 50 次）。</li><li>自动化工具：使用 <code>acme.sh</code> 或 <code>Certbot</code> 可简化证书续期流程（支持 Let&#39;s Encrypt、ZeroSSL、BuyPass 等）。</li></ol><h2 id="自动化工具" tabindex="-1"><a class="header-anchor" href="#自动化工具" aria-hidden="true">#</a> 自动化工具</h2>',3),Z={href:"http://acme.sh/",target:"_blank",rel:"noopener noreferrer"},K=n("p",null,[n("strong",null,"核心功能对比")],-1),U=n("th",null,"特性",-1),Y=n("th",null,"Certbot",-1),z={href:"http://acme.sh/",target:"_blank",rel:"noopener noreferrer"},J=n("tbody",null,[n("tr",null,[n("td",null,"开发维护"),n("td",null,"由 EFF 和 Let's Encrypt 官方维护"),n("td",null,"第三方开源社区维护")]),n("tr",null,[n("td",null,"依赖环境"),n("td",null,"需 Python 环境"),n("td",null,"纯 Shell 脚本（无额外依赖）")]),n("tr",null,[n("td",null,"默认 CA"),n("td",null,"Let's Encrypt"),n("td",null,"ZeroSSL（可切换为 Let's Encrypt）")]),n("tr",null,[n("td",null,"通配符证书支持"),n("td",null,"✔️（需 DNS 验证）"),n("td",null,"✔️（支持 DNS 验证）")]),n("tr",null,[n("td",null,"多 CA 支持"),n("td",null,"❌（仅 Let's Encrypt）"),n("td",null,"✔️（Let's Encrypt、ZeroSSL、BuyPass 等）")]),n("tr",null,[n("td",null,"DNS 提供商集成"),n("td",null,"有限（需插件支持）"),n("td",null,"广泛（内置 100+ DNS API 支持）")]),n("tr",null,[n("td",null,"自动化续期"),n("td",null,"✔️（需配置 cron）"),n("td",null,"✔️（安装时自动配置 cron）")]),n("tr",null,[n("td",null,"证书安装灵活性"),n("td",null,"需手动配置路径或插件"),n("td",null,[s("支持自定义路径和命令（"),n("code",null,"--install-cert"),s("）")])]),n("tr",null,[n("td",null,"权限管理"),n("td",null,"需 root 权限操作 Web 服务器"),n("td",null,"可非 root 用户运行")]),n("tr",null,[n("td",null,"轻量化"),n("td",null,"较高（依赖 Python 包）"),n("td",null,"极低（单文件脚本）")])],-1),V=n("h2",{id:"acme-sh实战",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#acme-sh实战","aria-hidden":"true"},"#"),s(" acme.sh实战")],-1),W={href:"http://xn--acme-kf5fx3ao66ap35bzkbmy1coi0e.sh",target:"_blank",rel:"noopener noreferrer"},H=o(`<h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 通过 curl 安装</span>
<span class="token function">curl</span> <span class="token operator">&lt;</span>https://get.acme.sh<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token function">sh</span>

<span class="token comment"># 或通过 git 克隆</span>
<span class="token function">git</span> clone <span class="token operator">&lt;</span>https://github.com/acmesh-official/acme.sh.git<span class="token operator">&gt;</span>
<span class="token builtin class-name">cd</span> acme.sh
./acme.sh <span class="token parameter variable">--install</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装后，脚本会自动添加到 <code>crontab</code> 实现证书自动续期。</p><h3 id="切换ca为let-s-encrypt" tabindex="-1"><a class="header-anchor" href="#切换ca为let-s-encrypt" aria-hidden="true">#</a> 切换CA为Let&#39;s Encrypt</h3><p>acme.sh默认采用的CA是ZeroSSL</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>acme<span class="token punctuation">.</span>sh <span class="token operator">--</span>set<span class="token operator">-</span><span class="token keyword">default</span><span class="token operator">-</span>ca <span class="token operator">--</span>server letsencrypt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="配置-dns-api-密钥" tabindex="-1"><a class="header-anchor" href="#配置-dns-api-密钥" aria-hidden="true">#</a> 配置 DNS API 密钥</h3><ol><li>Cloudflare 获取 API Token：</li><li>登录 Cloudflare 控制台。</li><li>进入 My Profile &gt; API Tokens。</li><li>创建 Token，权限至少包含 <code>Zone:Zone:Read</code> 和 <code>Zone:DNS:Edit</code>。</li><li>保存生成的 Token。</li></ol><p>设置环境变量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">CF_Token</span><span class="token operator">=</span><span class="token string">&quot;YOUR_API_TOKEN&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CF_Account_ID</span><span class="token operator">=</span><span class="token string">&quot;YOUR_CLOUDFLARE_ACCOUNT_ID&quot;</span>  <span class="token comment"># 可选，某些情况下需要</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>阿里云 DNS (Aliyun DNS) 获取 AccessKey：</li><li>登录阿里云控制台。</li><li>进入 RAM 访问控制 &gt; 用户管理，创建子账号并授予 <code>AliyunDNSFullAccess</code> 权限。</li><li>保存子账号的 <code>AccessKey ID</code> 和 <code>AccessKey Secret</code>。</li></ol><p>设置环境变量：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">ALI_Key</span><span class="token operator">=</span><span class="token string">&quot;YOUR_ALIYUN_ACCESSKEY_ID&quot;</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ALI_Secret</span><span class="token operator">=</span><span class="token string">&quot;YOUR_ALIYUN_ACCESSKEY_SECRET&quot;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="签发证书" tabindex="-1"><a class="header-anchor" href="#签发证书" aria-hidden="true">#</a> 签发证书</h3><ol><li>使用 Cloudflare DNS 挑战</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--issue</span> <span class="token parameter variable">--dns</span> dns_cf <span class="token parameter variable">-d</span> example.com <span class="token parameter variable">-d</span> *.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol><li>使用阿里云 DNS 挑战</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>acme.sh <span class="token parameter variable">--issue</span> <span class="token parameter variable">--dns</span> dns_ali <span class="token parameter variable">-d</span> example.com <span class="token parameter variable">-d</span> *.example.com

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>参数说明：</li><li><code>-dns dns_cf</code> 或 <code>-dns dns_ali</code>：指定 DNS 提供商。</li><li><code>d</code>：指定域名，支持通配符证书（<code>.example.com</code>）。</li></ul><h3 id="安装证书" tabindex="-1"><a class="header-anchor" href="#安装证书" aria-hidden="true">#</a> 安装证书</h3><p>证书默认保存在 <code>~/.acme.sh/example.com/</code> 目录下，生成的证书文件类似如下图所示：</p><figure><img src="https://cdn.justdopay.top/notion/md5-fe514445de5f38f85b568b40e7e51730.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>这里简单介绍下nginx的配置，acme.sh生成的证书文件虽然后缀是cer，但格式是pem格式，所以nginx可以直接用，如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code>    #ssl_certificate    <span class="token operator">/</span>etc<span class="token operator">/</span>letsencrypt<span class="token operator">/</span>live<span class="token operator">/</span>xxx<span class="token punctuation">.</span>com<span class="token operator">/</span>fullchain<span class="token punctuation">.</span>pem<span class="token punctuation">;</span>
    #ssl_certificate_key    <span class="token operator">/</span>etc<span class="token operator">/</span>letsencrypt<span class="token operator">/</span>live<span class="token operator">/</span>xxx<span class="token punctuation">.</span>com<span class="token operator">/</span>privkey<span class="token punctuation">.</span>pem<span class="token punctuation">;</span>

    ssl_certificate    <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>acme<span class="token punctuation">.</span>sh<span class="token operator">/</span>xxx<span class="token punctuation">.</span>com<span class="token operator">/</span>fullchain<span class="token punctuation">.</span>cer<span class="token punctuation">;</span>  
    ssl_certificate_key    <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>acme<span class="token punctuation">.</span>sh<span class="token operator">/</span>xxx<span class="token punctuation">.</span>com<span class="token operator">/</span>xxx<span class="token punctuation">.</span>com<span class="token punctuation">.</span>key<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自动续期" tabindex="-1"><a class="header-anchor" href="#自动续期" aria-hidden="true">#</a> 自动续期</h3><p><code>acme.sh</code> 已自动添加 cron 任务，无需手动操作。验证 cron 任务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">crontab</span> <span class="token parameter variable">-l</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果没有，可以手动添加下，内容如下：</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token number">38</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token string">&quot;/root/.acme.sh&quot;</span><span class="token operator">/</span>acme<span class="token punctuation">.</span>sh <span class="token operator">--</span>cron <span class="token operator">--</span>home <span class="token string">&quot;/root/.acme.sh&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他" aria-hidden="true">#</a> 其他</h3><ol><li>权限问题：确保 API Token/AccessKey 有足够的 DNS 修改权限。</li><li>环境变量持久化：若将 API 密钥写入 <code>~/.bashrc</code> 或 <code>~/.acme.sh/account.conf</code>，重启后仍有效。执行上面的命令后，api密钥会自动写入<code>~/.acme.sh/account.conf</code> 文件。 可以通过 <code>acme.sh —info</code> 查看</li><li>日志查看：使用 <code>acme.sh --list</code> 查看已签发证书，或通过 <code>-debug</code> 参数调试。</li><li>多域名支持：通过多个 <code>d</code> 参数指定多个域名或子域名。</li></ol><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,33),Q=n("p",null,[n("br"),n("br"),n("br"),n("br"),n("br"),n("br")],-1),$=n("hr",null,null,-1),X=n("hr",null,null,-1),nn=n("ul",null,[n("li",null,[n("strong",null,"随机毒鸡汤"),s("：目前最靠谱的发财方法，就是，你家拆迁了。 "),n("br"),n("br"),n("img",{src:"https://images.pexels.com/photos/31727702/pexels-photo-31727702.jpeg?auto=compress&cs=tinysrgb&h=650&w=940",alt:"Lush cherry blossoms in full bloom in a vibrant spring setting.",loading:"lazy"})])],-1);function sn(en,an){const t=r("ExternalLinkIcon"),a=r("RouterLink");return i(),p("div",null,[u,n("p",null,[s("官方主页："),n("a",h,[s("letsencrypt.org"),e(t)])]),m,_,b,n("p",null,[s("官方主页："),n("a",k,[s("zerossl.com"),e(t)])]),g,v,f,n("p",null,[s("官方主页："),n("a",E,[s("buypass.com/ssl"),e(t)])]),n("p",null,[n("strong",null,[s("4. "),n("a",A,[s("SSL.com"),e(t)])]),s(" • 免费证书有效期：30 天")]),x,C,n("p",null,[s("官方主页："),n("a",S,[s("ssl.com"),e(t)])]),y,B,L,n("p",null,[s("官方主页："),n("a",D,[s("cloud.google.com/certificate-manager"),e(t)])]),N,n("table",null,[F,n("tbody",null,[w,P,I,n("tr",null,[n("td",null,[n("a",j,[s("SSL.com"),e(t)])]),M,G,q,T]),O])]),R,n("p",null,[s("以下是 Certbot 和 "),n("a",Z,[s("acme.sh"),e(t)]),s(" 两款主流 ACME 客户端工具的对比，涵盖功能、适用场景和操作特性：")]),K,n("table",null,[n("thead",null,[n("tr",null,[U,Y,n("th",null,[n("a",z,[s("acme.sh"),e(t)])])])]),J]),V,n("p",null,[n("a",W,[s("个人比较喜欢用acme.sh"),e(t)]),s("，下面使用acme.sh工具来完成证书申请、自动化续期。")]),H,n("ul",null,[n("li",null,[e(a,{to:"/other/MongoDB%E9%AB%98%E5%8F%AF%E7%94%A8.html"},{default:l(()=>[s("MongoDB高可用")]),_:1})]),n("li",null,[e(a,{to:"/other/Sublime%20Text%20%E6%A0%BC%E5%BC%8F%E5%8C%96JSON.html"},{default:l(()=>[s("Sublime Text 格式化JSON")]),_:1})]),n("li",null,[e(a,{to:"/software/unclassified/%E7%BA%BF%E4%B8%8AFullGC%E9%A2%91%E7%B9%81%E7%9A%84%E6%8E%92%E6%9F%A5.html"},{default:l(()=>[s("线上FullGC频繁的排查")]),_:1})]),n("li",null,[e(a,{to:"/software/maccms/MAC%20CMS.html"},{default:l(()=>[s("MAC CMS")]),_:1})]),n("li",null,[e(a,{to:"/software/docker/Centos%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85Docker.html"},{default:l(()=>[s("Centos离线安装Docker")]),_:1})]),n("li",null,[e(a,{to:"/software/unclassified/Javassist%E6%95%B4%E7%90%86.html"},{default:l(()=>[s("Javassist整理")]),_:1})]),n("li",null,[e(a,{to:"/other/PGSQL%E7%9A%84json%E5%92%8C%20jsonb%20%E8%AF%BB%E5%86%99%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html"},{default:l(()=>[s("PGSQL的json和 jsonb 读写性能测试")]),_:1})]),n("li",null,[e(a,{to:"/other/Nginx%E7%9A%84%E5%8F%8C%E5%90%91%E8%AE%A4%E8%AF%81%E9%85%8D%E7%BD%AE.html"},{default:l(()=>[s("Nginx的双向认证配置")]),_:1})]),n("li",null,[e(a,{to:"/software/spring/SpringCloud%E6%80%BB%E4%BD%93%E8%AE%A4%E8%AF%86.html"},{default:l(()=>[s("SpringCloud总体认识")]),_:1})]),n("li",null,[e(a,{to:"/other/GitHub%20Workflow%E7%AA%81%E7%84%B6%E6%8A%A5%E9%94%99.html"},{default:l(()=>[s("GitHub Workflow突然报错")]),_:1})]),n("li",null,[e(a,{to:"/other/CentOS7%E4%B8%8BDocker%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E5%90%8E%E9%98%B2%E7%81%AB%E5%A2%99%E5%A4%B1%E6%95%88.html"},{default:l(()=>[s("CentOS7下Docker端口映射后防火墙失效")]),_:1})]),n("li",null,[e(a,{to:"/other/https%E5%92%8Chttp%E6%B7%B7%E7%94%A8%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html"},{default:l(()=>[s("https和http混用解决办法")]),_:1})])]),Q,$,X,nn])}const tn=c(d,[["render",sn],["__file","免费https证书、自动续期.html.vue"]]);export{tn as default};
