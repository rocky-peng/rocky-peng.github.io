import{_ as o,$ as p,a0 as l,a1 as n,a3 as e,a4 as t,a5 as i,a2 as a,w as c}from"./framework-b3a0f150.js";const r={},d=i(`<h2 id="初始数据" tabindex="-1"><a class="header-anchor" href="#初始数据" aria-hidden="true">#</a> 初始数据</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:1,&quot;name&quot;:&quot;小明&quot;, &quot;age&quot;:18}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:2,&quot;name&quot;:&quot;小明1&quot;, &quot;age&quot;:17}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:3,&quot;name&quot;:&quot;小明3&quot;, &quot;age&quot;:16}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:4,&quot;name&quot;:&quot;小明4&quot;, &quot;age&quot;:20}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:5,&quot;name&quot;:&quot;小明5&quot;, &quot;age&quot;:30}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:6,&quot;name&quot;:&quot;小明6&quot;, &quot;age&quot;:10}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:7,&quot;name&quot;:&quot;小明7&quot;, &quot;age&quot;:15}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:8,&quot;name&quot;:&quot;小明8&quot;, &quot;age&quot;:35}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:9,&quot;name&quot;:&quot;小明9&quot;, &quot;age&quot;:35}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-4a3de158e20935f6b916a26b4cb21a54.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="where" tabindex="-1"><a class="header-anchor" href="#where" aria-hidden="true">#</a> Where</h2><h3 id="精确匹配" tabindex="-1"><a class="header-anchor" href="#精确匹配" aria-hidden="true">#</a> 精确匹配</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span> <span class="token keyword">as</span> a<span class="token punctuation">,</span>info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb <span class="token keyword">as</span> b<span class="token punctuation">,</span>info <span class="token keyword">as</span> c <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-62bd7ca712b92f604a125071fc48cc45.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><hr><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span> <span class="token keyword">as</span> a<span class="token punctuation">,</span>info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb <span class="token keyword">as</span> b<span class="token punctuation">,</span>info <span class="token keyword">as</span> c <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&#39;小明4&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-1d441b9a2eed822cfcffa387ad17b785.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="模糊匹配" tabindex="-1"><a class="header-anchor" href="#模糊匹配" aria-hidden="true">#</a> 模糊匹配</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">where</span> info <span class="token comment">#&gt;&gt; &#39;{name}&#39; like &#39;%明&#39;;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-43f7e49091046edf383e859981ca1905.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><hr><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">&#39;%4&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-9ddfccdf3034813fc20ba24b625ad568.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-89475d6fb050cc73e3f97fc49bd03c69.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="修改" tabindex="-1"><a class="header-anchor" href="#修改" aria-hidden="true">#</a> 修改</h2><h3 id="增加json字段" tabindex="-1"><a class="header-anchor" href="#增加json字段" aria-hidden="true">#</a> 增加json字段</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info <span class="token operator">||</span> <span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb  <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-6af15a340c5be493c9b8ece7d96b06e0.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.com/notion/md5-8ea2a5fac6d6e8d5cc4fa3b925805fd6.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="删除json字段" tabindex="-1"><a class="header-anchor" href="#删除json字段" aria-hidden="true">#</a> 删除json字段</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info<span class="token operator">-</span><span class="token string">&#39;gender&#39;</span> <span class="token keyword">where</span>  <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-dff3c28e3b29f2f79048230c54a6dbfe.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.com/notion/md5-5454c1282a1bd4089a55c9442657e34a.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="修改json字段值" tabindex="-1"><a class="header-anchor" href="#修改json字段值" aria-hidden="true">#</a> 修改json字段值</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info <span class="token operator">||</span> <span class="token string">&#39;{&quot;age&quot;:16}&#39;</span>::jsonb  <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.com/notion/md5-e1f926e68951b3a665e46f972a174adc.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.com/notion/md5-084eaf5e07602158aa1e5fa7f6943a6c.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="分页" tabindex="-1"><a class="header-anchor" href="#分页" aria-hidden="true">#</a> 分页</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span>  <span class="token keyword">limit</span> <span class="token number">2</span> <span class="token keyword">offset</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>offset 从0开始</strong></li></ul><figure><img src="https://cdn.justdopay.com/notion/md5-af25be7103d393e043d2bfea53a1b981.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="其他内容" tabindex="-1"><a class="header-anchor" href="#其他内容" aria-hidden="true">#</a> 其他内容</h2><ol><li><p>统计表占用空间</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token constant">SELECT</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> table_name                                         <span class="token constant">AS</span> table_full_name<span class="token punctuation">,</span>
       <span class="token function">pg_total_relation_size</span><span class="token punctuation">(</span><span class="token string">&#39;&quot;&#39;</span> <span class="token operator">||</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;&quot;.&quot;&#39;</span> <span class="token operator">||</span> table_name <span class="token operator">||</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span> <span class="token constant">AS</span> size
<span class="token constant">FROM</span> information_schema<span class="token punctuation">.</span>tables
<span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token function">pg_total_relation_size</span><span class="token punctuation">(</span><span class="token string">&#39;&quot;&#39;</span> <span class="token operator">||</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;&quot;.&quot;&#39;</span> <span class="token operator">||</span> table_name <span class="token operator">||</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span> <span class="token constant">DESC</span> <span class="token constant">DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>筛选某个字段包含%的数据</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>select <span class="token operator">*</span> from xxxxx where aaa like <span class="token char">&#39;%\\%%&#39;</span> <span class="token constant">ESCAPE</span> &#39;\\&#39;<span class="token punctuation">;</span>

或者 

select <span class="token operator">*</span> from xxxxx where aaa like <span class="token char">&#39;%a%%&#39;</span> <span class="token constant">ESCAPE</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,40),u=n("p",null,[n("br"),n("br"),n("br"),n("br"),n("br"),n("br")],-1),k=n("hr",null,null,-1),g=n("hr",null,null,-1),m=n("ul",null,[n("li",null,[n("strong",null,"随机毒鸡汤"),a("：活下去的勇气，是因为怕死。 "),n("br"),n("br"),n("img",{src:"https://tuapi.eees.cc/api.php?category=fengjing&type=302&uuid=8f03671b-46d9-4fe6-9675-4450ca431887",alt:"",loading:"lazy"})])],-1);function f(h,b){const s=c("RouterLink");return p(),l("div",null,[d,n("ul",null,[n("li",null,[e(s,{to:"/other/Git%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E6%8F%90%E4%BA%A4%E5%B9%B6push%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93.html"},{default:t(()=>[a("Git合并多个提交并push到远程仓库")]),_:1})]),n("li",null,[e(s,{to:"/other/%E5%BE%AE%E5%8D%9A%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0.html"},{default:t(()=>[a("微博关注关系如何实现")]),_:1})]),n("li",null,[e(s,{to:"/software/middleware/es/ES6.2.3(3%E8%8A%82%E7%82%B9)%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%88%B0ES7.4.1(5%E8%8A%82%E7%82%B9).html"},{default:t(()=>[a("ES6.2.3(3节点)数据迁移到ES7.4.1(5节点)")]),_:1})]),n("li",null,[e(s,{to:"/software/java-basic/%E5%BC%B1%E5%BC%95%E7%94%A8%E7%A4%BA%E4%BE%8B.html"},{default:t(()=>[a("弱引用示例")]),_:1})]),n("li",null,[e(s,{to:"/software/spring/Spring%20Cloud%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%8A%80%E6%9C%AF%E6%A6%82%E8%A7%88%E3%80%90Finchley%20%E7%89%88%E3%80%91.html"},{default:t(()=>[a("Spring Cloud（一）：服务治理技术概览【Finchley 版】")]),_:1})]),n("li",null,[e(s,{to:"/other/MongoDB%E9%AB%98%E5%8F%AF%E7%94%A8.html"},{default:t(()=>[a("MongoDB高可用")]),_:1})]),n("li",null,[e(s,{to:"/other/PGSQL%20GIN%E7%B4%A2%E5%BC%95%E2%80%9C%E5%A4%B1%E6%95%88%E2%80%9D.html"},{default:t(()=>[a("PGSQL GIN索引“失效”")]),_:1})]),n("li",null,[e(s,{to:"/other/istio%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html"},{default:t(()=>[a("istio基础知识")]),_:1})]),n("li",null,[e(s,{to:"/other/Spring%20Boot%E5%8D%87%E7%BA%A7%E5%88%B02%206%20x%E8%B8%A9%E7%9A%84%E5%9D%91.html"},{default:t(()=>[a("Spring Boot升级到2 6 x踩的坑")]),_:1})]),n("li",null,[e(s,{to:"/software/unclassified/Flutter%E5%BC%80%E5%8F%91%E9%9C%80%E8%A6%81%E6%B6%89%E5%8F%8A%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%A7%E7%BA%B2.html"},{default:t(()=>[a("Flutter开发需要涉及的知识点大纲")]),_:1})]),n("li",null,[e(s,{to:"/software/java-basic/%E4%B8%8D%E9%87%8D%E5%90%AF%20JVM%EF%BC%8C%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2%E6%8E%89%E5%B7%B2%E7%BB%8F%E5%8A%A0%E8%BD%BD%E7%9A%84%E7%B1%BB%EF%BC%9F.html"},{default:t(()=>[a("不重启 JVM，如何替换掉已经加载的类？")]),_:1})]),n("li",null,[e(s,{to:"/other/GitHub%20Workflow%E7%AA%81%E7%84%B6%E6%8A%A5%E9%94%99.html"},{default:t(()=>[a("GitHub Workflow突然报错")]),_:1})])]),u,k,g,m])}const E=o(r,[["render",f],["__file","PostgreSQL JSON类型字段常用操作.html.vue"]]);export{E as default};
