import{_ as o,$ as p,a0 as l,a1 as s,a3 as t,a4 as e,a5 as c,a2 as n,w as r}from"./framework-58787b1c.js";const i={},u=c(`<p>再github上跑了一个工作流，主要就是执行<code>npm install</code>，<code>npm run docs:build</code></p><p>使用的package.json如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-blogs&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-blogs&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;docs:build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build src&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;docs:clean-dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev src --clean-cache&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;docs:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev src&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;@vuepress/client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0-beta.61&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@vuepress/plugin-google-analytics&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0-beta.61&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.47&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vuepress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0-beta.61&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vuepress-plugin-china-search-console&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.5&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vuepress-plugin-components&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0-beta.184&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vuepress-plugin-search-pro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0-beta.184&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;vuepress-theme-hope&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.0.0-beta.184&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再workflow中指定了node的版本是：16.18.1</p><p>上面的配置一直都在正常跑，估计正常跑了大半年之久，突然在2024-01-26号github发来npm install报错邮件。</p><p>错误信息大致如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>npm <span class="token constant">ERR</span><span class="token operator">!</span> code <span class="token constant">ERESOLVE</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token constant">ERESOLVE</span> unable <span class="token keyword">to</span> <span class="token namespace">resolve</span> dependency tree
npm <span class="token constant">ERR</span><span class="token operator">!</span> 
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">While</span> resolving<span class="token operator">:</span> my<span class="token operator">-</span>blogs<span class="token annotation punctuation">@2.0.0</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">Found</span><span class="token operator">:</span> vuepress<span class="token annotation punctuation">@2.0.0</span><span class="token operator">-</span>beta<span class="token punctuation">.</span><span class="token number">61</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> node_modules<span class="token operator">/</span>vuepress
npm <span class="token constant">ERR</span><span class="token operator">!</span>   dev vuepress@<span class="token string">&quot;2.0.0-beta.61&quot;</span> from the root project
npm <span class="token constant">ERR</span><span class="token operator">!</span> 
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">Could</span> not resolve dependency<span class="token operator">:</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> peer vuepress@<span class="token string">&quot;2.0.0-rc.2&quot;</span> from <span class="token annotation punctuation">@vuepress</span><span class="token operator">/</span>plugin<span class="token operator">-</span>google<span class="token operator">-</span>analytics<span class="token annotation punctuation">@2.0.0</span><span class="token operator">-</span>rc<span class="token punctuation">.</span><span class="token number">1</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> node_modules<span class="token operator">/</span><span class="token annotation punctuation">@vuepress</span><span class="token operator">/</span>plugin<span class="token operator">-</span>google<span class="token operator">-</span>analytics
npm <span class="token constant">ERR</span><span class="token operator">!</span>   dev <span class="token annotation punctuation">@vuepress</span><span class="token operator">/</span>plugin<span class="token operator">-</span>google<span class="token operator">-</span>analytics@<span class="token string">&quot;^2.0.0-beta.61&quot;</span> from the root project
npm <span class="token constant">ERR</span><span class="token operator">!</span> 
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">Fix</span> the upstream dependency conflict<span class="token punctuation">,</span> or retry
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token keyword">this</span> command <span class="token keyword">with</span> <span class="token operator">--</span>force<span class="token punctuation">,</span> or <span class="token operator">--</span>legacy<span class="token operator">-</span>peer<span class="token operator">-</span>deps
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token keyword">to</span> <span class="token namespace">accept</span> an incorrect <span class="token punctuation">(</span>and potentially broken<span class="token punctuation">)</span> dependency resolution<span class="token punctuation">.</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> 
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">See</span> <span class="token operator">/</span>home<span class="token operator">/</span>runner<span class="token operator">/</span><span class="token punctuation">.</span>npm<span class="token operator">/</span>eresolve<span class="token operator">-</span>report<span class="token punctuation">.</span>txt <span class="token keyword">for</span> a full report<span class="token punctuation">.</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span> <span class="token class-name">A</span> complete log of <span class="token keyword">this</span> run can be found in<span class="token operator">:</span>
npm <span class="token constant">ERR</span><span class="token operator">!</span>     <span class="token operator">/</span>home<span class="token operator">/</span>runner<span class="token operator">/</span><span class="token punctuation">.</span>npm<span class="token operator">/</span>_logs<span class="token operator">/</span><span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">29</span><span class="token constant">T10_29_19_566Z</span><span class="token operator">-</span>debug<span class="token operator">-</span><span class="token number">0.l</span>og
<span class="token class-name">Error</span><span class="token operator">:</span> <span class="token class-name">Process</span> completed <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">1.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后本地用同样的node版本，同样的配置执行又可以正常执行</p><p>然后各种搜资料，问CHATGPT，都没能正常解决。后来无意发现package.json文件中有<code>^</code> 符合，这个符合是做一些版本兼容用的。</p><p>具体来说，如果一个包的版本号是 <strong><code>^X.Y.Z</code></strong>，那么 npm 将会允许安装的版本范围包括从 <strong><code>X.Y.Z</code></strong> 到 <strong><code>X.(Y+1).0</code></strong> 的任何版本，但不包括主版本号 <strong><code>X</code></strong> 的更改</p><p>这也就解释了，为什么package.json中明明没有2.0.0-rc.2版本的依赖，但错误信息却有。</p><p>所以尝试着把<code>^</code> 删除，然后重试，<strong><code>成功了</code></strong></p><figure><img src="https://cdn.justdopay.com/notion/md5-e23817114a2dc4f30cb612c3c699c423.svg" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,15),d=s("p",null,[s("br"),s("br"),s("br"),s("br"),s("br"),s("br")],-1),k=s("hr",null,null,-1),v=s("hr",null,null,-1),m=s("ul",null,[s("li",null,[s("strong",null,"随机毒鸡汤"),n("：为了变漂亮，你坚持了哪些好习惯？坚持开美颜。 "),s("br"),s("br"),s("img",{src:"https://tuapi.eees.cc/api.php?category=biying&type=302&uuid=1f3bfd04-560b-4d28-82e8-5c43370e119b",alt:"",loading:"lazy"})])],-1);function g(b,E){const a=r("RouterLink");return p(),l("div",null,[u,s("ul",null,[s("li",null,[t(a,{to:"/other/getPath%20vs%20getAbsolutePath%20vs%20getCanonicalPath.html"},{default:e(()=>[n("getPath vs getAbsolutePath vs getCanonicalPath")]),_:1})]),s("li",null,[t(a,{to:"/software/unclassified/Oh%20My%20ZSH.html"},{default:e(()=>[n("Oh My ZSH")]),_:1})]),s("li",null,[t(a,{to:"/software/middleware/mysql/MySQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{default:e(()=>[n("MySQL常用命令")]),_:1})]),s("li",null,[t(a,{to:"/other/%E5%BE%AE%E5%8D%9A%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0.html"},{default:e(()=>[n("微博关注关系如何实现")]),_:1})]),s("li",null,[t(a,{to:"/software/java-basic/Thread%20&%20ExecutorService%20&%20ThreadPoolExecutor%20%E6%80%BB%E8%A7%88.html"},{default:e(()=>[n("Thread & ExecutorService & ThreadPoolExecutor 总览")]),_:1})]),s("li",null,[t(a,{to:"/other/Sublime%20Text%20%E6%A0%BC%E5%BC%8F%E5%8C%96JSON.html"},{default:e(()=>[n("Sublime Text 格式化JSON")]),_:1})]),s("li",null,[t(a,{to:"/software/shodowsocks/ShadowsockServerUpdatePort.html"},{default:e(()=>[n("ShadowsockServerUpdatePort")]),_:1})]),s("li",null,[t(a,{to:"/software/java-basic/%E4%B8%8D%E9%87%8D%E5%90%AF%20JVM%EF%BC%8C%E5%A6%82%E4%BD%95%E6%9B%BF%E6%8D%A2%E6%8E%89%E5%B7%B2%E7%BB%8F%E5%8A%A0%E8%BD%BD%E7%9A%84%E7%B1%BB%EF%BC%9F.html"},{default:e(()=>[n("不重启 JVM，如何替换掉已经加载的类？")]),_:1})]),s("li",null,[t(a,{to:"/other/vuepress/vuepress-theme-hope%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97.html"},{default:e(()=>[n("vuepress-theme-hope使用心得")]),_:1})]),s("li",null,[t(a,{to:"/other/Lombok%E7%9A%84Accessors%E5%AF%BC%E8%87%B4EasyExcel%E8%AF%BB%E5%8F%96%E5%A4%B1%E8%B4%A5.html"},{default:e(()=>[n("Lombok的Accessors导致EasyExcel读取失败")]),_:1})]),s("li",null,[t(a,{to:"/other/Linux%20dev%20shm%E7%9B%AE%E5%BD%95.html"},{default:e(()=>[n("Linux dev shm目录")]),_:1})]),s("li",null,[t(a,{to:"/software/raft/raft%E5%8D%8F%E8%AE%AE.html"},{default:e(()=>[n("raft协议")]),_:1})])]),d,k,v,m])}const q=o(i,[["render",g],["__file","GitHub Workflow突然报错.html.vue"]]);export{q as default};
