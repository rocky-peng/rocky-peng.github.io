import{_ as i,$ as d,a0 as r,a1 as e,a3 as a,a4 as l,a5 as o,a2 as n,w as c}from"./framework-8c4427da.js";const t={},u=o(`<p>BBR 是google发布一个网络拥塞算法，相比其他算法而言其性能更高，能更好的利用网络带宽。</p><h2 id="前提条件" tabindex="-1"><a class="header-anchor" href="#前提条件" aria-hidden="true">#</a> 前提条件</h2><ul><li>CentOS 7.x</li><li>sudo 权限</li></ul><h2 id="步骤一-升级内核" tabindex="-1"><a class="header-anchor" href="#步骤一-升级内核" aria-hidden="true">#</a> 步骤一：升级内核</h2><ol><li><p>查看当前内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>uname -r
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>可以看到内核版本是3.10.0</p></li><li><p>安装 ELRepo</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo rpm --import https<span class="token operator">:</span><span class="token comment">//www.elrepo.org/RPM-GPG-KEY-elrepo.org</span>

sudo rpm -Uvh http<span class="token operator">:</span><span class="token comment">//www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>安装高版本内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo yum --enablerepo=elrepo-kernel install kernel-ml -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装完成后查看安装结果</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>rpm -qa | grep kernel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>如果安装成功，上面命令会输出 <code>kernel-ml-x.x.x-1.el7.elrepo.x86_64</code> ，类似下面样子</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>kernel-ml<span class="token number">-4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64

kernel<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514</span>.el7.x86_64

kernel-tools-libs<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64

kernel-tools<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64

kernel<span class="token number">-3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>启用新的内核，启用前查看grub2启动项</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo egrep ^menuentry /etc/grub2.cfg | cut -f <span class="token number">2</span> -d \\&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>CentOS Linux <span class="token number">7</span> Rescue a0cbf86a6ef1416a8812657bb4f2b860 (<span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64)

CentOS Linux (<span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514.2</span>.<span class="token number">2</span>.el7.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">3.10</span>.<span class="token number">0</span><span class="token number">-514</span>.el7.x86_64) <span class="token number">7</span> (Core)

CentOS Linux (<span class="token number">0</span>-rescue-bf94f46c6bd04792a6a42c91bae645f7) <span class="token number">7</span> (Core)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>从上往下，从0开始往下数，我们要启用的内核位置是1，于是执行</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo grub2-set-default <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>重启系统</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>reboot
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>重启后查看系统内核</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>uname -r
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会有类似下面的输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token number">4.9</span>.<span class="token number">0</span><span class="token number">-1</span>.el7.elrepo.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="步骤二-启用bbr" tabindex="-1"><a class="header-anchor" href="#步骤二-启用bbr" aria-hidden="true">#</a> 步骤二：启用BBR</h2><ol><li><p>修改<code>sysctl</code> 配置已启用BBR</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>echo &#39;net.core.default_qdisc=fq&#39; | sudo tee -a /etc/sysctl.conf

echo &#39;net.ipv4.tcp_congestion_control=bbr&#39; | sudo tee -a /etc/sysctl.conf

sudo sysctl -p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>验证是否已经启用了BBR</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo sysctl net.ipv4.tcp_available_congestion_control
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会输出类似下面的内容</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>net.ipv4.tcp_available_congestion_control = bbr cubic reno
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>进一步验证</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>sudo sysctl -n net.ipv4.tcp_congestion_control
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>应该输出</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>bbr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>最后检查内核模块是否已经加载</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>lsmod | grep bbr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>会输出类似下面的内容</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>tcp_bbr                <span class="token number">16384</span>  <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="步骤三" tabindex="-1"><a class="header-anchor" href="#步骤三" aria-hidden="true">#</a> 步骤三</h2><p>没有了，享用BBR吧</p><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,11),p=e("p",null,[e("br"),e("br"),e("br"),e("br"),e("br"),e("br")],-1),m=e("hr",null,null,-1),b=e("hr",null,null,-1),v=e("ul",null,[e("li",null,[e("strong",null,"随机毒鸡汤"),n("：第一个称马尾辫为马尾的人，有没有想过，马尾长在马的哪里？ "),e("br"),e("br"),e("img",{src:"https://images.pexels.com/photos/32007122/pexels-photo-32007122.jpeg?auto=compress&cs=tinysrgb&h=650&w=940",alt:"A vibrant red Chinese lantern with golden patterns captured outdoors in Hsinchu County, Taiwan.",loading:"lazy"})])],-1);function g(E,h){const s=c("RouterLink");return d(),r("div",null,[u,e("ul",null,[e("li",null,[a(s,{to:"/other/%E5%85%8D%E8%B4%B9https%E8%AF%81%E4%B9%A6%E3%80%81%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F.html"},{default:l(()=>[n("免费https证书、自动续期")]),_:1})]),e("li",null,[a(s,{to:"/software/middleware/mysql/MySQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"},{default:l(()=>[n("MySQL常用命令")]),_:1})]),e("li",null,[a(s,{to:"/software/docker/Docker%E8%BF%9B%E8%A1%8C%E8%B5%84%E6%BA%90%E9%9A%94%E7%A6%BB.html"},{default:l(()=>[n("Docker进行资源隔离")]),_:1})]),e("li",null,[a(s,{to:"/other/Nacos-Spring%20Gateway-Spring%20boot%E6%97%A0%E6%84%9F%E5%8F%91%E5%B8%83.html"},{default:l(()=>[n("Nacos-Spring Gateway-Spring boot无感发布")]),_:1})]),e("li",null,[a(s,{to:"/software/middleware/es/ES6.2.3(3%E8%8A%82%E7%82%B9)%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%E5%88%B0ES7.4.1(5%E8%8A%82%E7%82%B9).html"},{default:l(()=>[n("ES6.2.3(3节点)数据迁移到ES7.4.1(5节点)")]),_:1})]),e("li",null,[a(s,{to:"/other/%E5%BE%AE%E5%8D%9A%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0.html"},{default:l(()=>[n("微博关注关系如何实现")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/%E6%B5%8B%E8%AF%95%E4%B8%A4%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%97%B4%E7%9A%84%E7%BD%91%E9%80%9F.html"},{default:l(()=>[n("测试两台服务器间的网速")]),_:1})]),e("li",null,[a(s,{to:"/software/unclassified/%E7%BA%BF%E4%B8%8AFullGC%E9%A2%91%E7%B9%81%E7%9A%84%E6%8E%92%E6%9F%A5.html"},{default:l(()=>[n("线上FullGC频繁的排查")]),_:1})]),e("li",null,[a(s,{to:"/software/jvm/JVM%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html"},{default:l(()=>[n("JVM异常处理")]),_:1})]),e("li",null,[a(s,{to:"/software/jvm/JVM%E6%9D%82%E9%A1%B9.html"},{default:l(()=>[n("JVM杂项")]),_:1})]),e("li",null,[a(s,{to:"/other/%E5%89%8D%E7%AB%AFaxios%E4%B8%8B%E8%BD%BDcsv%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81.html"},{default:l(()=>[n("前端axios下载csv文件乱码")]),_:1})]),e("li",null,[a(s,{to:"/other/Lombok%E7%9A%84Accessors%E5%AF%BC%E8%87%B4EasyExcel%E8%AF%BB%E5%8F%96%E5%A4%B1%E8%B4%A5.html"},{default:l(()=>[n("Lombok的Accessors导致EasyExcel读取失败")]),_:1})])]),p,m,b,v])}const k=i(t,[["render",g],["__file","如何安装Google BBR.html.vue"]]);export{k as default};
