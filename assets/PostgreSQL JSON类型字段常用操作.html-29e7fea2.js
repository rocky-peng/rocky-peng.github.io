import{_ as o,$ as p,a0 as l,a1 as a,a3 as e,a4 as t,a5 as i,a2 as n,w as c}from"./framework-8c4427da.js";const r={},d=i(`<h2 id="初始数据" tabindex="-1"><a class="header-anchor" href="#初始数据" aria-hidden="true">#</a> 初始数据</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:1,&quot;name&quot;:&quot;小明&quot;, &quot;age&quot;:18}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:2,&quot;name&quot;:&quot;小明1&quot;, &quot;age&quot;:17}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:3,&quot;name&quot;:&quot;小明3&quot;, &quot;age&quot;:16}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:4,&quot;name&quot;:&quot;小明4&quot;, &quot;age&quot;:20}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:5,&quot;name&quot;:&quot;小明5&quot;, &quot;age&quot;:30}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:6,&quot;name&quot;:&quot;小明6&quot;, &quot;age&quot;:10}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:7,&quot;name&quot;:&quot;小明7&quot;, &quot;age&quot;:15}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:8,&quot;name&quot;:&quot;小明8&quot;, &quot;age&quot;:35}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> name_age <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;{&quot;id&quot;:9,&quot;name&quot;:&quot;小明9&quot;, &quot;age&quot;:35}&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-4a3de158e20935f6b916a26b4cb21a54.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="where" tabindex="-1"><a class="header-anchor" href="#where" aria-hidden="true">#</a> Where</h2><h3 id="精确匹配" tabindex="-1"><a class="header-anchor" href="#精确匹配" aria-hidden="true">#</a> 精确匹配</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span> <span class="token keyword">as</span> a<span class="token punctuation">,</span>info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb <span class="token keyword">as</span> b<span class="token punctuation">,</span>info <span class="token keyword">as</span> c <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-62bd7ca712b92f604a125071fc48cc45.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><hr><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span> <span class="token keyword">as</span> a<span class="token punctuation">,</span>info<span class="token operator">||</span><span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb <span class="token keyword">as</span> b<span class="token punctuation">,</span>info <span class="token keyword">as</span> c <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&#39;小明4&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-1d441b9a2eed822cfcffa387ad17b785.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="模糊匹配" tabindex="-1"><a class="header-anchor" href="#模糊匹配" aria-hidden="true">#</a> 模糊匹配</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">where</span> info <span class="token comment">#&gt;&gt; &#39;{name}&#39; like &#39;%明&#39;;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-43f7e49091046edf383e859981ca1905.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><hr><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">&#39;%4&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-9ddfccdf3034813fc20ba24b625ad568.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-89475d6fb050cc73e3f97fc49bd03c69.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="修改" tabindex="-1"><a class="header-anchor" href="#修改" aria-hidden="true">#</a> 修改</h2><h3 id="增加json字段" tabindex="-1"><a class="header-anchor" href="#增加json字段" aria-hidden="true">#</a> 增加json字段</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info <span class="token operator">||</span> <span class="token string">&#39;{&quot;gender&quot;:&quot;男&quot;}&#39;</span>::jsonb  <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-6af15a340c5be493c9b8ece7d96b06e0.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.top/notion/md5-8ea2a5fac6d6e8d5cc4fa3b925805fd6.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="删除json字段" tabindex="-1"><a class="header-anchor" href="#删除json字段" aria-hidden="true">#</a> 删除json字段</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info<span class="token operator">-</span><span class="token string">&#39;gender&#39;</span> <span class="token keyword">where</span>  <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-dff3c28e3b29f2f79048230c54a6dbfe.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.top/notion/md5-5454c1282a1bd4089a55c9442657e34a.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h3 id="修改json字段值" tabindex="-1"><a class="header-anchor" href="#修改json字段值" aria-hidden="true">#</a> 修改json字段值</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> name_age <span class="token keyword">set</span> info <span class="token operator">=</span> info <span class="token operator">||</span> <span class="token string">&#39;{&quot;age&quot;:16}&#39;</span>::jsonb  <span class="token keyword">where</span> <span class="token punctuation">(</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>::int4 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://cdn.justdopay.top/notion/md5-e1f926e68951b3a665e46f972a174adc.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><figure><img src="https://cdn.justdopay.top/notion/md5-084eaf5e07602158aa1e5fa7f6943a6c.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="分页" tabindex="-1"><a class="header-anchor" href="#分页" aria-hidden="true">#</a> 分页</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> name_age <span class="token keyword">order</span> <span class="token keyword">by</span> info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;age&#39;</span> <span class="token keyword">desc</span><span class="token punctuation">,</span>info<span class="token operator">-</span><span class="token operator">&gt;&gt;</span><span class="token string">&#39;id&#39;</span> <span class="token keyword">asc</span>  <span class="token keyword">limit</span> <span class="token number">2</span> <span class="token keyword">offset</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>offset 从0开始</strong></li></ul><figure><img src="https://cdn.justdopay.top/notion/md5-af25be7103d393e043d2bfea53a1b981.png" alt="Untitled" tabindex="0" loading="lazy"><figcaption>Untitled</figcaption></figure><h2 id="其他内容" tabindex="-1"><a class="header-anchor" href="#其他内容" aria-hidden="true">#</a> 其他内容</h2><ol><li><p>统计表占用空间</p><div class="language-jsx line-numbers-mode" data-ext="jsx"><pre class="language-jsx"><code><span class="token constant">SELECT</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span> <span class="token operator">||</span> table_name                                         <span class="token constant">AS</span> table_full_name<span class="token punctuation">,</span>
       <span class="token function">pg_total_relation_size</span><span class="token punctuation">(</span><span class="token string">&#39;&quot;&#39;</span> <span class="token operator">||</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;&quot;.&quot;&#39;</span> <span class="token operator">||</span> table_name <span class="token operator">||</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span> <span class="token constant">AS</span> size
<span class="token constant">FROM</span> information_schema<span class="token punctuation">.</span>tables
<span class="token constant">ORDER</span> <span class="token constant">BY</span> <span class="token function">pg_total_relation_size</span><span class="token punctuation">(</span><span class="token string">&#39;&quot;&#39;</span> <span class="token operator">||</span> table_schema <span class="token operator">||</span> <span class="token string">&#39;&quot;.&quot;&#39;</span> <span class="token operator">||</span> table_name <span class="token operator">||</span> <span class="token string">&#39;&quot;&#39;</span><span class="token punctuation">)</span> <span class="token constant">DESC</span> <span class="token constant">DESC</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>筛选某个字段包含%的数据</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>select <span class="token operator">*</span> from xxxxx where aaa like <span class="token char">&#39;%\\%%&#39;</span> <span class="token constant">ESCAPE</span> &#39;\\&#39;<span class="token punctuation">;</span>

或者 

select <span class="token operator">*</span> from xxxxx where aaa like <span class="token char">&#39;%a%%&#39;</span> <span class="token constant">ESCAPE</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><br><h2 id="系统推荐" tabindex="-1"><a class="header-anchor" href="#系统推荐" aria-hidden="true">#</a> 系统推荐</h2>`,40),u=a("p",null,[a("br"),a("br"),a("br"),a("br"),a("br"),a("br")],-1),k=a("hr",null,null,-1),g=a("hr",null,null,-1),m=a("ul",null,[a("li",null,[a("strong",null,"随机毒鸡汤"),n("：现在的时代，不是属于00后的，是属于厚脸皮的！ "),a("br"),a("br"),a("img",{src:"https://images.pexels.com/photos/2061168/pexels-photo-2061168.jpeg?auto=compress&cs=tinysrgb&h=650&w=940",alt:"Detailed view of colorful programming code on a computer screen.",loading:"lazy"})])],-1);function f(h,b){const s=c("RouterLink");return p(),l("div",null,[d,a("ul",null,[a("li",null,[e(s,{to:"/software/unclassified/MAT%E5%B7%A5%E5%85%B7.html"},{default:t(()=>[n("MAT工具")]),_:1})]),a("li",null,[e(s,{to:"/software/unclassified/KVM%20%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85.html"},{default:t(()=>[n("KVM 虚拟机安装")]),_:1})]),a("li",null,[e(s,{to:"/other/MySQL%E9%AB%98%E5%8F%AF%E7%94%A8.html"},{default:t(()=>[n("MySQL高可用")]),_:1})]),a("li",null,[e(s,{to:"/other/%E5%BE%AE%E5%8D%9A%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0.html"},{default:t(()=>[n("微博关注关系如何实现")]),_:1})]),a("li",null,[e(s,{to:"/other/%E9%9A%8F%E8%AE%B0.html"},{default:t(()=>[n("随记")]),_:1})]),a("li",null,[e(s,{to:"/other/Censys%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E%E5%AD%A6%E4%B9%A0.html"},{default:t(()=>[n("Censys搜索引擎学习")]),_:1})]),a("li",null,[e(s,{to:"/software/unclassified/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8C%B9%E9%85%8D%E7%AC%AC%E5%87%A0%E4%B8%AA%E7%AC%A6%E5%8F%B7%E9%97%AE%E9%A2%98.html"},{default:t(()=>[n("正则表达式匹配第几个符号问题")]),_:1})]),a("li",null,[e(s,{to:"/software/unclassified/%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9git%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E4%B8%AD%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1.html"},{default:t(()=>[n("批量修改git历史记录中的用户名和邮箱")]),_:1})]),a("li",null,[e(s,{to:"/software/docker/Docker%E7%AC%94%E8%AE%B0.html"},{default:t(()=>[n("Docker笔记")]),_:1})]),a("li",null,[e(s,{to:"/software/java-basic/Java%E9%9D%A2%E8%AF%95%E5%9F%BA%E7%A1%80.html"},{default:t(()=>[n("Java面试基础")]),_:1})]),a("li",null,[e(s,{to:"/software/unclassified/%E5%88%86%E5%B8%83%E5%BC%8F%E9%97%AE%E9%A2%98.html"},{default:t(()=>[n("分布式问题")]),_:1})]),a("li",null,[e(s,{to:"/software/docker/Docker%E8%B7%A8%E4%B8%BB%E6%9C%BA%E9%80%9A%E4%BF%A1%E6%96%B9%E6%A1%88.html"},{default:t(()=>[n("Docker跨主机通信方案")]),_:1})])]),u,k,g,m])}const v=o(r,[["render",f],["__file","PostgreSQL JSON类型字段常用操作.html.vue"]]);export{v as default};
